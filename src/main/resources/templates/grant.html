<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>授权</title>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
</head>
<style>

    .title {
        background-color: #1E90FF;
        height: 50px;
        padding-left: 25%;
        padding-right: 25%;
        color: white;
        line-height: 50px;
        font-size: 18px;
    }

    .scope-list-group .list-group-item:first-child {
        border-top-left-radius: 0.5rem;
        border-top-right-radius: 0.5rem;
    }

    .scope-list-group .list-group-item:last-child {
        margin-bottom: 0;
        border-bottom-right-radius: .5rem;
        border-bottom-left-radius: .5rem;
    }

    .scope-list-group .list-group-item {
        margin-bottom: -2px;
        border: 2px solid rgba(0, 0, 0, .125);
    }
</style>
<body style="margin: 0">
<div class="title">
    <div class="float-left">OAUTH 授权</div>
    <div class="float-right" style="font-size: 16px">
        <span th:text="${session.SPRING_SECURITY_CONTEXT.authentication.principal.userName}"></span>
        <a href="#help" class="text-white ml-2">帮助</a>
        <a href="/logout" class="text-white ml-2">退出</a>
    </div>
</div>
<div class="justify-content-center d-flex mt-3 mb-3">
    <div class="text-left">
        <h5 th:text="${clientId}+' 请求授权，该应用将获取你的以下信息'" class="mt-3 mb-3"></h5>
        <form method="post" action="/oauth/authorize">
            <input type="hidden" name="user_oauth_approval" value="true">
            <ul class="list-group mt-3 mb-3 scope-list-group">
                <li th:each="scope:${scopes}" class="list-group-item">
                    <div class="form-check mb-0">
                        <label class="form-check-label font-weight-bold">
                            <input type="checkbox" th:name="'scope.'+${scope}" th:value="true" class="form-check-input"
                                   th:checked="${scope eq 'all' ? true : false}"
                                   th:disabled="${scope eq 'all' ? true : false}">
                            <span th:text="'scope.'+${scope}" class="font-weight-bold" th:remove="tag"></span>
                        </label>
                    </div>
                    <label style="display: none">
                        <input type="checkbox" th:if="${scope eq 'all'}" th:name="'scope.'+${scope}" th:value="true"
                               class="form-check-input"
                               th:checked="${scope eq 'all' ? true : false}">
                    </label>
                </li>
            </ul>
            授权后表明你已同意 <a href="#boot">服务协议</a><br>
            <div class="w-100 text-right mt-3">
                <button class="btn btn-primary" type="submit" name="authorize" th:value="Authorize">
                    同意/授权
                </button>
            </div>
        </form>
    </div>
</div>
</body>
</html>